<template>
    <div class="support-page">
        <div class="page-header slds-p-vertical_large slds-p-horizontal_x-large">
            <h1 class="slds-text-heading_large">Help & Support</h1>
            <p class="slds-text-heading_small">Let's take a step ahead and help you better.</p>
        </div>

        <div class="slds-p-around_medium slds-p-lg-around_large">
            <lightning-layout>
                <lightning-layout-item size="12" medium-device-size="3" class="sidebar">
                    <div class="sidebar-content">
                        <h2 class="slds-text-heading_small slds-m-bottom_medium">Knowledge Base</h2>
                        <div class="slds-nav-vertical">
                            <ul class="slds-nav-vertical__section">
                                <li class="slds-nav-vertical__item">
                                    <a href="#" class={allTopicsClass} onclick={handleCategorySelect} data-category="All">All Topics</a>
                                </li>
                                <template for:each={categories} for:item="cat">
                                    <li key={cat.name} class="slds-nav-vertical__item">
                                        <a href="#" class={cat.cssClass} onclick={handleCategorySelect} data-category={cat.name}>{cat.label}</a>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                </lightning-layout-item>

                <lightning-layout-item size="12" medium-device-size="9" padding="around-medium">
                    <h2 class="slds-text-heading_medium slds-m-bottom_medium">{selectedCategoryLabel}</h2>
                    <lightning-input
                        type="search" label="Search" variant="label-hidden"
                        placeholder="Search articles..."
                        class="slds-m-bottom_large" onchange={handleSearchChange}
                        value={searchTerm}>
                    </lightning-input>
                    
                    <div class="slds-is-relative">
                        <template if:true={isLoading}>
                            <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
                        </template>

                        <template if:false={isLoading}>
                            <template if:true={hasArticles}>
                                <template for:each={articles} for:item="article">
                                    <div key={article.Id} class="article-item slds-p-bottom_medium slds-m-bottom_medium">
                                        <a href="#" class="article-title" data-id={article.Id} onclick={navigateToArticle}>{article.Title}</a>
                                    </div>
                                </template>
                            </template>
                            <template if:false={hasArticles}>
                                <div class="slds-box slds-theme_default slds-text-align_center slds-p-around_large">
                                    <p class="slds-text-heading_small">No articles found.</p>
                                </div>
                            </template>
                        </template>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </div>
    </div>
    
    </template>